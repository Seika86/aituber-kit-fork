# AITuberKit 開発版変更内容

## 概要

このバージョンでは、視覚的な表現力を大幅に向上させる画像管理機能、新しい音声合成エンジンの追加、AIモデルの拡張、ユーザー体験の改善など、多岐にわたる機能強化が行われました。

## 主要な新機能

### 1. 画像管理・配置システム

#### 画像アップロード機能

- ユーザーが任意の画像ファイルをアップロードできる機能を追加
- 対応形式：JPEG、PNG、GIF、WebP
- ファイルサイズ制限とバリデーション機能を実装
- アップロード時の自動圧縮機能により、パフォーマンスを最適化

#### 画像配置・編集機能

- アップロードした画像をキャラクター画面上に自由に配置
- ドラッグ操作による画像の移動
- リサイズハンドルによるサイズ調整
- 右クリックメニューでの詳細操作（削除、レイヤー移動など）

#### レイヤー管理システム

- 画像とキャラクターの重ね順を細かく制御
- キャラクターの前面・背面への画像配置
- ドラッグ&ドロップによる直感的なレイヤー順序変更
- クイックメニューからのレイヤー管理機能

#### 画像管理インターフェース

- 設定画面に専用の「画像設定」タブを追加
- アップロード済み画像の一覧表示
- 画像プレビュー機能
- 個別削除およびバッチ削除機能

### 2. 音声合成エンジンの大幅拡張

#### Cartesia TTS API統合

- 高品質な音声合成エンジンとして新たにCartesia APIを追加
- リアルタイム音声生成に対応
- 多様な音声スタイルとキャラクター設定
- APIキーベースの認証システム

#### Aivis Cloud API統合

- Aivis Cloudプラットフォームとの連携機能
- スタイル名による音声カスタマイズ
- 既存のAivis Speechとの互換性を保持
- 詳細な音声パラメーター調整（スピード、ピッチ、イントネーション）

#### 音声設定の改善

- 既存のAivis Speechエンジンの設定項目を拡張
- イントネーション調整機能の追加
- 音声プレビュー機能の強化
- エラーハンドリングとバリデーションの改善

### 3. AI/LLMモデルサポートの拡張

#### Google Gemini最新モデル対応

- Gemini 2.5 Pro: 最高性能の汎用モデル
- Gemini 2.5 Flash: 高速応答に特化したモデル
- Gemini 2.5 Flash Lite: 軽量版高速モデル
- マルチモーダル機能（画像・テキスト同時処理）に対応

#### 検索グラウンディング機能

- リアルタイム検索結果を活用した応答生成
- 対応モデルの自動判定機能
- 検索精度の向上とより正確な情報提供

#### カスタムモデル機能

- ユーザー独自のモデル名指定機能
- プロバイダー設定とは独立したモデル選択
- 設定画面でのトグル切り替え機能

### 4. ユーザーインターフェースの大幅改善

#### クイックメニューシステム

- 従来の「キャラクタープリセットメニュー」を「クイックメニュー」に発展
- キャラクター設定とレイヤー管理を統合
- タブ切り替えによる直感的な操作
- ドラッグ&ドロップによるメニュー項目の並び替え

#### 会話履歴機能の強化

- 会話ログとアシスタントテキストの表示切り替え
- 履歴の詳細表示モード
- ログのエクスポート機能への準備

#### 設定画面の再構成

- 新機能に対応した設定タブの追加
- 視覚的な改善とアイコンの追加
- 設定項目のグループ化と整理
- レスポンシブデザインの改善

## 技術的な改善・最適化

### パフォーマンス向上

- 画像圧縮アルゴリズムの実装により、メモリ使用量を削減
- デバウンス機能による不要な処理の削減
- レイヤー管理の最適化によるレンダリング性能向上

### 開発体験の向上

- 新機能に対応したテストケースの大幅追加
- APIエンドポイントの単体テスト実装
- ユーティリティ関数のテストカバレッジ向上
- Lintルールの改善とコード品質の向上

### アーキテクチャの改善

- 画像管理専用のZustandストアを新設
- 状態管理の分離によるコードの保守性向上
- APIエンドポイントの RESTful 設計
- エラーハンドリングとログ機能の充実

### 依存関係の最適化

- react-beautiful-dnd: ドラッグ&ドロップ機能の実装
- node-mocks-http: テスト環境の改善
- 画像処理ライブラリの追加
- 不要な依存関係の削除とバンドルサイズの最適化

## 国際化対応

### 多言語サポートの拡張

- 17言語に対応した翻訳ファイルの更新
- 新機能に関連する翻訳キーの追加
- 画像設定、音声設定、メニュー関連の多言語対応
- UI文言の一貫性向上

### ローカライゼーション改善

- 地域固有の設定項目への対応
- 文字エンコーディング問題の解決
- RTL（右から左）言語への準備

## セキュリティ・安定性向上

### APIセキュリティ

- アップロード画像のバリデーション強化
- ファイルタイプとサイズ制限の厳格化
- APIキー管理の改善

### エラーハンドリング

- 画像処理エラーの適切な処理
- 音声合成失敗時のフォールバック機能
- ユーザーフレンドリーなエラーメッセージ

## 今後の拡張性

この更新により、以下の機能拡張への基盤が整いました：

- 動画ファイルのサポート
- より高度な画像編集機能
- 追加の音声合成エンジン統合
- AIモデルの動的ロード機能
- クラウドストレージ連携

## 使用方法

### 画像機能の使い方

1. 設定画面から「画像設定」タブを選択
2. 「画像をアップロード」ボタンから画像ファイルを選択
3. アップロードされた画像を画面上にドラッグ&ドロップで配置
4. 画像をクリックして移動・リサイズが可能
5. クイックメニューからレイヤー順序を調整

### 新しい音声エンジンの使い方

1. 設定画面から「合成音声設定」を選択
2. ドロップダウンからCartesiaまたはAivis Cloudを選択
3. 対応するAPIキーを入力
4. 音声パラメーターを調整
5. 「ボイスを試聴する」で確認

### クイックメニューの活用

1. 設定画面で「クイックメニュー表示」を有効化
2. 画面右上のメニューアイコンをクリック
3. 「プリセット」タブでキャラクター設定を変更
4. 「レイヤー」タブで画像とキャラクターの重ね順を調整
5. ドラッグ&ドロップで項目の並び順をカスタマイズ
